<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "ad0c054ebd3de404d997d1707a513c70",
  "translation_date": "2025-09-17T18:06:57+00:00",
  "source_file": "Module05/04.SLMOps.Deployment.md",
  "language_code": "ur"
}
-->
# ุณฺฉุดู 4: ุชุนูุงุช - ูพุฑูฺฺฉุดู ฺฉ ู ุชุงุฑ ูุงฺู ฺฉุง ููุงุฐ

## ุฌุงุฆุฒ

 ุฌุงูุน ูนููนูุฑู ุขูพ ฺฉู Foundry Local ฺฉ ุฐุฑุน ูุงุฆู ูนููฺ ฺฉูุงููนุงุฆุฒฺ ูุงฺูุฒ ฺฉ ุชุนูุงุช ฺฉ ูฺฉูู ุนูู ุณ ฺฏุฒุฑู ูฺบ ุฑููุงุฆ ฺฉุฑ ฺฏุง ู ูุงฺู ฺฉููุฑฺูุ ฺฉูุงููนุงุฆุฒุดู ุขูพูนูุงุฆุฒุดูุ ุงูุฑ ุชุนูุงุช ฺฉ ุชุฑุชุจ ฺฉู ุงุจุชุฏุง ุณ ุขุฎุฑ ุชฺฉ ฺฉูุฑ ฺฉุฑฺบ ฺฏ

## ุถุฑูุฑุงุช

ุดุฑูุน ฺฉุฑู ุณ ูพูุ ูู ุจูุงุฆฺบ ฺฉ ุขูพ ฺฉ ูพุงุณ ุฏุฑุฌ ุฐู ฺุฒฺบ ููุฌูุฏ ฺบ:

- โ ุชุนูุงุช ฺฉ ู ุชุงุฑ ุงฺฉ ูุงุฆู ูนููฺ onnx ูุงฺู
- โ ููฺูุฒ ุง ูฺฉ ฺฉููพููนุฑ
- โ Python 3.10 ุง ุงุณ ุณ ุฌุฏุฏ ูุฑฺู
- โ ฺฉู ุงุฒ ฺฉู 8GB ุฏุณุชุงุจ RAM
- โ ุขูพ ฺฉ ุณุณูนู ูพุฑ ุงูุณูนุงู ุดุฏ Foundry Local

## ุญุต 1: ูุงุญูู ฺฉ ุชุฑุชุจ

### ูุทููุจ ูนููุฒ ุงูุณูนุงู ฺฉุฑูุง

ุงูพู ูนุฑููู (ููฺูุฒ ูพุฑ ฺฉูุงูฺ ูพุฑุงููพูนุ ูฺฉ ูพุฑ ูนุฑููู) ฺฉู ฺฉฺพููฺบ ุงูุฑ ุฏุฑุฌ ุฐู ฺฉูุงูฺุฒ ฺฉู ุชุฑุชุจ ูุงุฑ ฺูุงุฆฺบ:

```bash
# Update transformers library to the latest version
pip install transformers -U

# Install Microsoft Olive (model conversion tool)
pip install git+https://github.com/microsoft/Olive.git

# Install ONNX Runtime GenAI
git clone https://github.com/microsoft/onnxruntime-genai
cd onnxruntime-genai && python build.py --config Release
pip install {Your build release path}/onnxruntime_genai-0.9.0.dev0-cp311-cp311-linux_x86_64.whl

# Install additional dependencies
pip install onnx onnxruntime numpy
```

โ๏ธ **ุงู ูููน**: ุขูพ ฺฉู CMake ูุฑฺู 3.31 ุง ุฌุฏุฏ ุชุฑ ฺฉ ุจฺพ ุถุฑูุฑุช ูฺฏุ ุฌุณ [cmake.org](https://cmake.org/download/) ุณ ฺุงุคูููฺ ฺฉุง ุฌุง ุณฺฉุชุง 

## ุญุต 2: ูุงฺู ฺฉููุฑฺู ุงูุฑ ฺฉูุงููนุงุฆุฒุดู

### ุตุญุญ ูุงุฑููน ฺฉุง ุงูุชุฎุงุจ

ฺฺพููน ูุงุฆู ูนููฺ ููฺฏูุฌ ูุงฺูุฒ ฺฉ ูุ ู **ONNX ูุงุฑููน** ุงุณุชุนูุงู ฺฉุฑู ฺฉ ุชุฌูุฒ ุฏุช ฺบ ฺฉููฺฉ  ูุฑุงู ฺฉุฑุชุง :

- ๐ ุจุชุฑ ฺฉุงุฑฺฉุฑุฏฺฏ ฺฉ ุขูพูนูุงุฆุฒุดู
- ๐ง ุงุฑฺูุฆุฑ ุณ ุขุฒุงุฏ ุชุนูุงุช
- ๐ญ ูพุฑูฺฺฉุดู ฺฉ ู ุชุงุฑ ุตูุงุญุชฺบ
- ๐ฑ ฺฉุฑุงุณ ูพููน ูุงุฑู ูุทุงุจูุช

### ุทุฑู 1: ุงฺฉ ฺฉูุงูฺ ฺฉููุฑฺู (ุชุฌูุฒ ฺฉุฑุฏ)

ุงูพู ูุงุฆู ูนููฺ ูุงฺู ฺฉู ุจุฑุง ุฑุงุณุช ฺฉููุฑูน ฺฉุฑู ฺฉ ู ุฏุฑุฌ ุฐู ฺฉูุงูฺ ุงุณุชุนูุงู ฺฉุฑฺบ:

```bash
olive auto-opt \
    --model_name_or_path /path/to/your/finetuned/model \
    --device cpu \
    --provider CPUExecutionProvider \
    --use_model_builder \
    --precision int4 \
    --output_path models/your-model-name/onnx \
    --log_level 1
```

**ูพุฑุงููนุฑ ฺฉ ูุถุงุญุช:**
- `--model_name_or_path`: ุขูพ ฺฉ ูุงุฆู ูนููฺ ูุงฺู ฺฉุง ุฑุงุณุช
- `--device cpu`: ุขูพูนูุงุฆุฒุดู ฺฉ ู CPU ุงุณุชุนูุงู ฺฉุฑฺบ
- `--precision int4`: INT4 ฺฉูุงููนุงุฆุฒุดู ุงุณุชุนูุงู ฺฉุฑฺบ (ุชูุฑุจุงู 75% ุณุงุฆุฒ ฺฉ ฺฉู)
- `--output_path`: ฺฉููุฑูนฺ ูุงฺู ฺฉ ู ุขุคูน ูพูน ุฑุงุณุช

### ุทุฑู 2: ฺฉููฺฏุฑุดู ูุงุฆู ฺฉุง ุทุฑู (ุงฺูุงูุณฺ ูุฒุฑุฒ)

`finetuned_conversion_config.json` ูุงู ุงฺฉ ฺฉููฺฏุฑุดู ูุงุฆู ุจูุงุฆฺบ:

```json
{
    "input_model": {
        "type": "HfModel",
        "model_path": "/path/to/your/finetuned/model",
        "task": "text-generation"
    },
    "systems": {
        "local_system": {
            "type": "LocalSystem",
            "accelerators": [
                {
                    "execution_providers": [
                        "CPUExecutionProvider"
                    ]
                }
            ]
        }
    },
    "passes": {
        "builder": {
            "type": "ModelBuilder",
            "config": {
                "precision": "int4",
                "quantization_config": {
                    "block_size": 128,
                    "is_symmetric": false
                }
            }
        }
    },
    "host": "local_system",
    "target": "local_system",
    "cache_dir": "cache",
    "output_dir": "models/output/your-finetuned-model-onnx"
}
```

ูพฺพุฑ ฺูุงุฆฺบ:

```bash
olive run --config ./finetuned_conversion_config.json
```

### ฺฉูุงููนุงุฆุฒุดู ุขูพุดูุฒ ฺฉุง ููุงุฒู

| ูพุฑุณฺู | ูุงุฆู ุณุงุฆุฒ | ุงููุฑูุณ ฺฉ ุฑูุชุงุฑ | ูุงฺู ฺฉ ฺฉูุงููน | ุชุฌูุฒ ฺฉุฑุฏ ุงุณุชุนูุงู |
|-----------|-----------|-----------------|---------------|-----------------|
| FP16      | ุจุณ ูุงุฆู ร 0.5 | ุชุฒ | ุจุชุฑู | ุงุฆ ุงูฺ ุงุฑฺูุฆุฑ |
| INT8      | ุจุณ ูุงุฆู ร 0.25 | ุจุช ุชุฒ | ุงฺฺพ | ูุชูุงุฒู ุงูุชุฎุงุจ |
| INT4      | ุจุณ ูุงุฆู ร 0.125 | ุณุจ ุณ ุชุฒ | ูุงุจู ูุจูู | ูุญุฏูุฏ ูุณุงุฆู |

๐ก **ุชุฌูุฒ**: ุงูพู ูพู ุชุนูุงุช ฺฉ ู INT4 ฺฉูุงููนุงุฆุฒุดู ุณ ุดุฑูุน ฺฉุฑฺบ ุงฺฏุฑ ฺฉูุงููน ุชุณู ุจุฎุด ู ูุ ุชู INT8 ุง FP16 ุขุฒูุงุฆฺบ

## ุญุต 3: Foundry Local ุชุนูุงุช ฺฉ ุชุฑุชุจ

### ูุงฺู ฺฉููฺฏุฑุดู ุจูุงูุง

Foundry Local ูุงฺูุฒ ฺุงุฆุฑฺฉูนุฑ ูพุฑ ุฌุงุฆฺบ:

```bash
foundry cache cd ./models/
```

ุงูพู ูุงฺู ฺฉ ฺุงุฆุฑฺฉูนุฑ ฺฉุง ฺฺพุงูฺ ุจูุงุฆฺบ:

```bash
mkdir -p ./models/custom/your-finetuned-model
```

ุงูพู ูุงฺู ฺุงุฆุฑฺฉูนุฑ ูฺบ `inference_model.json` ฺฉููฺฏุฑุดู ูุงุฆู ุจูุงุฆฺบ:

```json
{
  "Name": "your-finetuned-model-int4",
  "Description": "Fine-tuned quantized model",
  "Version": "1.0",
  "PromptTemplate": {
    "system": "<|im_start|>system\n{Content}<|im_end|>",
    "user": "<|im_start|>user\n{Content}<|im_end|>",
    "assistant": "<|im_start|>assistant\n{Content}<|im_end|>",
    "prompt": "<|im_start|>user\n{Content}<|im_end|>\n<|im_start|>assistant"
  },
  "ModelConfig": {
    "max_length": 2048,
    "temperature": 0.7,
    "top_p": 0.9,
    "repetition_penalty": 1.1
  }
}
```

### ูุงฺู ฺฉ ู ูุฎุตูุต ูนููพููน ฺฉููฺฏุฑุดูุฒ

#### Qwen ุณุฑุฒ ูุงฺูุฒ ฺฉ ู:

```json
{
  "Name": "qwen-finetuned-int4",
  "PromptTemplate": {
    "system": "<|im_start|>system\n{Content}<|im_end|>",
    "user": "<|im_start|>user\n{Content}<|im_end|>",
    "assistant": "<|im_start|>assistant\n{Content}<|im_end|>",
    "prompt": "<|im_start|>user\n{Content}<|im_end|>\n<|im_start|>assistant"
  }
}
```

## ุญุต 4: ูุงฺู ฺฉ ุฌุงูฺ ุงูุฑ ุขูพูนูุงุฆุฒุดู

### ูุงฺู ุงูุณูนุงูุดู ฺฉ ุชุตุฏู

ฺฺฉ ฺฉุฑฺบ ฺฉ ุขุง Foundry Local ุขูพ ฺฉ ูุงฺู ฺฉู ูพฺุงู ุณฺฉุชุง :

```bash
foundry cache ls
```

ุขูพ ฺฉู `your-finetuned-model-int4` ูุฑุณุช ูฺบ ูุธุฑ ุขูุง ฺุง

### ูุงฺู ฺฉ ุฌุงูฺ ุดุฑูุน ฺฉุฑูุง

```bash
foundry model run your-finetuned-model-int4
```

### ฺฉุงุฑฺฉุฑุฏฺฏ ฺฉ ุจูฺ ูุงุฑฺฉูฺฏ

ุฌุงูฺ ฺฉ ุฏูุฑุงู ฺฉูุฏ ููนุฑฺฉุณ ฺฉ ูฺฏุฑุงู ฺฉุฑฺบ:

1. **ุฌูุงุจ ฺฉุง ููุช**: ุฑ ุฌูุงุจ ฺฉ ู ุงูุณุท ููุช ฺฉ ูพูุงุฆุด ฺฉุฑฺบ
2. **ูููุฑ ฺฉุง ุงุณุชุนูุงู**: RAM ฺฉ ฺฉฺพูพุช ฺฉ ูฺฏุฑุงู ฺฉุฑฺบ
3. **CPU ฺฉุง ุงุณุชุนูุงู**: ูพุฑูุณุณุฑ ฺฉ ููฺ ฺฉู ฺฺฉ ฺฉุฑฺบ
4. **ุขุคูน ูพูน ฺฉูุงููน**: ุฌูุงุจ ฺฉ ูุทุงุจูุช ุงูุฑ ู ุขูฺฏ ฺฉุง ุฌุงุฆุฒ ูฺบ

### ฺฉูุงููน ููฺุดู ฺฺฉ ูุณูน

- โ ูุงฺู ูุงุฆู ูนููฺ ฺููู ฺฉ ุณูุงูุงุช ฺฉุง ููุงุณุจ ุฌูุงุจ ุฏุชุง 
- โ ุฌูุงุจ ฺฉุง ูุงุฑููน ูุชููุน ุขุคูน ูพูน ฺฺพุงูฺ ุณ ูู ฺฉฺพุงุชุง 
- โ ุทูู ุงุณุชุนูุงู ฺฉ ุฏูุฑุงู ฺฉูุฆ ูููุฑ ูฺฉ ูฺบ
- โ ูุฎุชูู ุงู ูพูน ููุจุงุฆูฺบ ูพุฑ ูุณุชูู ฺฉุงุฑฺฉุฑุฏฺฏ
- โ ฺฉูุงุฑ ฺฉ ฺฉุณุฒ ุงูุฑ ุบูุท ุงู ูพูนุณ ฺฉู ููุงุณุจ ุทุฑู ุณ ูฺู ฺฉุฑูุง

## ุฎูุงุต

ูุจุงุฑฺฉ ู! ุขูพ ู ฺฉุงูุงุจ ุณ ูฺฉูู ฺฉุง:

- โ ูุงุฆู ูนููฺ ูุงฺู ูุงุฑููน ฺฉููุฑฺู
- โ ูุงฺู ฺฉูุงููนุงุฆุฒุดู ุขูพูนูุงุฆุฒุดู
- โ Foundry Local ุชุนูุงุช ฺฉ ุชุฑุชุจ
- โ ฺฉุงุฑฺฉุฑุฏฺฏ ฺฉ ูนูููฺฏ ุงูุฑ ุฎุฑุงุจูฺบ ฺฉุง ูพุช ูฺฏุงูุง

---

**ฺุณฺฉููุฑ**:  
 ุฏุณุชุงูุฒ AI ุชุฑุฌู ุณุฑูุณ [Co-op Translator](https://github.com/Azure/co-op-translator) ฺฉุง ุงุณุชุนูุงู ฺฉุฑุช ูุฆ ุชุฑุฌู ฺฉ ฺฏุฆ  ู ุฏุฑุณุชฺฏ ฺฉ ู ฺฉูุดุด ฺฉุฑุช ฺบุ ูฺฉู ุจุฑุง ฺฉุฑู ุขฺฏุง ุฑฺบ ฺฉ ุฎูุฏฺฉุงุฑ ุชุฑุฌู ูฺบ ุบูุทุงฺบ ุง ุบุฑ ุฏุฑุณุชุงฺบ ู ุณฺฉุช ฺบ ุงุตู ุฏุณุชุงูุฒ ฺฉู ุงุณ ฺฉ ุงุตู ุฒุจุงู ูฺบ ูุณุชูุฏ ุฐุฑุน ุณูุฌฺพุง ุฌุงูุง ฺุง ุงู ูุนูููุงุช ฺฉ ูุ ูพุด ูุฑ ุงูุณุงู ุชุฑุฌู ฺฉ ุณูุงุฑุด ฺฉ ุฌุงุช  ู ุงุณ ุชุฑุฌู ฺฉ ุงุณุชุนูุงู ุณ ูพุฏุง ูู ูุงู ฺฉุณ ุจฺพ ุบูุท ูู ุง ุบูุท ุชุดุฑุญ ฺฉ ุฐู ุฏุงุฑ ูฺบ ฺบ