<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "20892f7994d9e5d2473ad19dfa93cf6d",
  "translation_date": "2025-09-18T16:04:26+00:00",
  "source_file": "Module02/01.PhiFamily.md",
  "language_code": "sw"
}
-->
# Sehemu ya 1: Misingi ya Familia ya Microsoft Phi Model

Familia ya modeli za Microsoft Phi inawakilisha mabadiliko makubwa katika akili bandia, ikionyesha kwamba modeli ndogo na zenye ufanisi zinaweza kufanikisha utendaji wa ajabu huku zikiwa na matumizi ya rasilimali kidogo zaidi ikilinganishwa na modeli kubwa za lugha za jadi. Ni muhimu kuelewa jinsi familia ya Phi inavyowezesha uwezo wa AI wenye nguvu kwa mahitaji ya chini ya kompyuta huku ikidumisha utendaji wa hali ya juu katika kazi mbalimbali.

## Rasilimali kwa Watengenezaji

### Katalogi ya Modeli ya Azure AI Foundry
Familia ya modeli za Phi (isipokuwa Phi-silica) inapatikana kupitia [Azure AI Foundry Model Catalog](https://ai.azure.com/explore/models?q=phi), ikirahisisha watengenezaji kufikia, kurekebisha, na kupeleka modeli hizi katika programu zao. Katalogi hii inatoa njia rahisi ya kujaribu aina tofauti za Phi na kuzihusisha katika miradi yako.

### Azure AI Foundry
Unaweza kupeleka na kujaribu modeli za Phi ukitumia [Azure AI Foundry](https://ai.azure.com), ambayo inatoa mazingira kamili ya kujenga, kujaribu, na kupeleka suluhisho za AI kwa maandalizi madogo.

### Foundry Local
Kwa maendeleo ya ndani na upelekaji, angalia [Microsoft Foundry Local](https://github.com/microsoft/foundry-local), ambayo inakuwezesha kuendesha modeli za Phi kwenye kompyuta yako ya maendeleo kwa usanidi ulioboreshwa.

### Rasilimali za Nyaraka
- [Microsoft Research: Phi Model Technical Reports](https://ai.azure.com/labs/projects/phi-4)
- [Phi Cookbook](https://aka.ms/phicookbook)

## Utangulizi

Katika somo hili, tutachunguza familia ya modeli za Microsoft Phi na dhana zake za msingi. Tutajadili mabadiliko ya familia ya Phi, mbinu za mafunzo za ubunifu zinazofanya modeli za Phi kuwa na ufanisi, aina kuu katika familia, na matumizi ya vitendo katika hali tofauti.

## Malengo ya Kujifunza

Mwisho wa somo hili, utaweza:

- Kuelewa falsafa ya muundo na mabadiliko ya familia ya modeli za Microsoft Phi.
- Kutambua ubunifu muhimu unaowezesha modeli za Phi kufanikisha utendaji wa hali ya juu kwa vigezo vichache.
- Kutambua faida na mapungufu ya aina tofauti za modeli za Phi.
- Kutumia maarifa ya modeli za Phi kuchagua aina zinazofaa kwa hali halisi.

## Kuelewa Paradigmu ya Jadi ya Modeli za AI

Kihistoria, kufanikisha utendaji wa hali ya juu katika usindikaji wa lugha asilia kulihitaji modeli kubwa za lugha zenye mabilioni au mamia ya mabilioni ya vigezo. Mashirika kwa kawaida hupeleka modeli hizi kwenye makundi yenye nguvu ya GPU, yakifikia uwezo wake kupitia API au miundombinu maalum ya vifaa.

Njia hii inafanya kazi vizuri kwa programu nyingi lakini ina mapungufu ya asili linapokuja suala la hali za upelekaji wa vitendo. Mbinu ya kawaida inahusisha kutumia modeli zinazohitaji rasilimali kubwa za kompyuta, kiasi kikubwa cha kumbukumbu, na matumizi makubwa ya nishati. Ingawa njia hii hutoa ufikiaji wa uwezo wa hali ya juu, inasababisha utegemezi wa vifaa vya gharama kubwa, inazalisha gharama kubwa za uendeshaji, na inapunguza kubadilika kwa upelekaji.

## Changamoto ya Upelekaji wa AI Ufanisi

Hitaji la AI yenye ufanisi zaidi limekuwa muhimu zaidi katika hali mbalimbali. Fikiria programu zinazohitaji upelekaji wa ndani kwa sababu za faragha, utekelezaji unaozingatia gharama ambapo gharama za API za wingu zinakuwa mzigo, hali za kompyuta za ukingo zenye rasilimali ndogo za vifaa, au programu za wakati halisi ambapo ucheleweshaji ni muhimu.

### Vikwazo Vikuu vya Upelekaji

Upelekaji wa modeli kubwa za jadi unakabiliwa na vikwazo kadhaa vya msingi vinavyopunguza matumizi yake ya vitendo:

- **Vikwazo vya Gharama**: Gharama kubwa za kompyuta hufanya upelekaji wa mara kwa mara kuwa ghali kwa mashirika mengi.
- **Vikwazo vya Rasilimali**: Upatikanaji mdogo wa miundombinu ya GPU ya hali ya juu unazuia chaguo za upelekaji.
- **Mahitaji ya Faragha**: Programu nyeti zinahitaji usindikaji wa ndani ili kudumisha faragha ya data.
- **Unyeti wa Ucheleweshaji**: Programu za wakati halisi zinahitaji majibu ya haraka bila ucheleweshaji wa safari ya wingu.

## Falsafa ya Modeli za Microsoft Phi

Familia ya modeli za Microsoft Phi inawakilisha mabadiliko ya msingi katika falsafa ya muundo wa modeli za AI, ikipa kipaumbele ufanisi na upelekaji wa vitendo huku ikidumisha sifa za utendaji thabiti. Modeli za Phi zinafanikisha hili kupitia usanifu wa ubunifu, mbinu za mafunzo za hali ya juu, na mbinu maalum za uboreshaji.

Familia ya Phi inajumuisha mbinu mbalimbali zilizoundwa kuongeza utendaji kwa kila kigezo, ikiruhusu upelekaji kwenye vifaa vya kawaida huku ikitoa uwezo wa AI wa maana. Lengo ni kudumisha utendaji wa ushindani huku ikipunguza kwa kiasi kikubwa mahitaji ya kompyuta, matumizi ya kumbukumbu, na gharama za uendeshaji.

### Kanuni za Msingi za Muundo wa Phi

Modeli za Phi zimejengwa juu ya kanuni kadhaa za msingi zinazozitofautisha na modeli kubwa za lugha za jadi:

- **Ufanisi Kwanza**: Zimeboreshwa kwa utendaji wa juu kwa kila kigezo badala ya ukubwa wa jumla.
- **Mafunzo ya Ubora**: Kuzingatia data ya mafunzo ya hali ya juu na iliyochaguliwa badala ya seti kubwa za data.
- **Kubadilika kwa Upelekaji**: Zimeundwa kufanya kazi kwa ufanisi kwenye usanidi mbalimbali wa vifaa.
- **Uwezo Maalum**: Mara nyingi zimeboreshwa kwa kazi au nyanja maalum ili kuongeza ufanisi.

## Teknolojia Muhimu Zinazowezesha Familia ya Phi

### Mbinu ya Mafunzo ya "Kitabu"

Moja ya vipengele vya mapinduzi ya familia ya Phi ni mbinu ya mafunzo ya "ubora wa kitabu". Badala ya kufundisha kwa kiasi kikubwa cha data isiyochujwa kutoka mtandao, modeli za Phi zinatumia maudhui ya elimu yaliyochaguliwa kwa uangalifu na ya hali ya juu yaliyoundwa kufundisha hoja, hesabu, usimbaji, na maarifa ya jumla kwa ufanisi.

Mbinu hii inafanya kazi kwa kuunda maudhui ya elimu ya bandia yanayofanana na vitabu vya hali ya juu na vifaa vya kitaaluma. Data ya mafunzo imeundwa mahsusi kuwa na sauti ya kielimu, ikizingatia maelezo ya wazi, hoja za hatua kwa hatua, na uwasilishaji wa maarifa ulio na muundo.

### Mafunzo ya Hoja ya Juu

Modeli za Phi za hivi karibuni zinajumuisha mbinu za mafunzo ya hoja za kisasa zinazowezesha utatuzi wa matatizo ya hatua nyingi. Mbinu hizi ni pamoja na:

**Mafunzo ya Mnyororo wa Mawazo**: Modeli zinajifunza kugawanya matatizo magumu katika hatua za kati za hoja, na kufanya mchakato wao wa utatuzi wa matatizo kuwa wazi na wa kuaminika.

**Upanuzi Wakati wa Utoaji**: Modeli huzalisha minyororo ya hoja ya kina inayotumia rasilimali za kompyuta za ziada wakati wa kizazi cha majibu kwa usahihi ulioimarishwa.

**Mafunzo ya Kando ya Uwezo**: Data ya mafunzo huchaguliwa mahsusi kujaribu modeli katika ukingo wa uwezo wake wa sasa, ikikuza kujifunza mifumo ya hoja ngumu.

### Ubunifu wa Kimuundo

Familia ya Phi inajumuisha uboreshaji kadhaa wa usanifu ulioundwa mahsusi kwa ufanisi:

**Ufanisi wa Vigezo**: Uchaguzi wa usanifu wa uangalifu unaongeza athari ya kila kigezo katika modeli.

**Muunganisho wa Njia Nyingi**: Muunganisho wa ufanisi wa usindikaji wa maandishi, maono, na sauti ndani ya usanifu wa kompakt.

**Uboreshaji wa Vifaa**: Aina maalum zilizoboreshwa kwa majukwaa maalum ya vifaa na hali za upelekaji.

## Uboreshaji wa Vifaa kwa Modeli za Phi

Mazingira ya kisasa ya upelekaji yanapata faida kutoka kwa ufanisi wa modeli za Phi katika usanidi mbalimbali wa vifaa:

### Upelekaji Ulioboreshwa kwa CPU

Modeli za Phi zimeundwa kufanya kazi kwa ufanisi kwenye vifaa vya CPU pekee, na kuzifanya kupatikana kwa upelekaji kwenye miundombinu ya kawaida ya kompyuta bila hitaji la viharakishi maalum vya AI.

### Uharakishaji wa GPU

Ingawa hazihitaji GPU zenye nguvu, modeli za Phi zinaweza kutumia rasilimali za GPU zinazopatikana kwa utendaji ulioimarishwa, zikitoa kubadilika katika usanidi wa upelekaji.

### Muunganisho wa Vifaa vya Ukingo

Aina maalum kama Phi-3-Silica zimeboreshwa kwa majukwaa maalum ya kompyuta za ukingo, zikifikia viwango vya ufanisi vya ajabu kama tokeni 650 kwa sekunde kwa matumizi ya nguvu ya 1.5W pekee.
Familia ya Phi inaonyesha kwamba mustakabali wa matumizi ya AI haupo tu katika kujenga mifano mikubwa zaidi, bali katika kujenga mifano yenye akili na ufanisi zaidi ambayo inaweza kufanya kazi kwa ufanisi katika mazingira mbalimbali ya vifaa huku ikidumisha viwango vya juu vya utendaji.

## Mifano ya Maendeleo na Ujumuishaji

### Kuanza Haraka na Transformers

Hivi ndivyo unavyoweza kuanza kutumia mifano ya Phi kwa kutumia maktaba ya Hugging Face Transformers:

```python
from transformers import AutoModelForCausalLM, AutoTokenizer
import torch

# Load Phi-4-mini-instruct
model = AutoModelForCausalLM.from_pretrained(
    "microsoft/Phi-4-mini-instruct",
    torch_dtype=torch.bfloat16,
    trust_remote_code=True,
    attn_implementation="flash_attention_2"  # For optimized performance
)

tokenizer = AutoTokenizer.from_pretrained("microsoft/Phi-4-mini-instruct")

# Format your prompt using the chat template
messages = [
    {"role": "system", "content": "You are a helpful assistant."},
    {"role": "user", "content": "Explain quantum computing in simple terms."}
]

# Apply chat template
input_text = tokenizer.apply_chat_template(messages, tokenize=False)
inputs = tokenizer(input_text, return_tensors="pt")

# Generate response
with torch.no_grad():
    outputs = model.generate(**inputs, max_new_tokens=200, temperature=0.7)
    
response = tokenizer.decode(outputs[0], skip_special_tokens=True)
print(response)
```

### Mfano wa Kuboresha Utendaji

Mfano ufuatao unaonyesha jinsi ya kuboresha utendaji wa Phi-4-mini-instruct kwa kazi maalum:

```python
from transformers import AutoModelForCausalLM, AutoTokenizer, TrainingArguments
from peft import LoraConfig
from trl import SFTTrainer
from datasets import load_dataset

# Configuration for LoRA fine-tuning
peft_config = LoraConfig(
    r=16,
    lora_alpha=32,
    lora_dropout=0.05,
    bias="none",
    task_type="CAUSAL_LM",
    target_modules="all-linear"
)

# Training configuration optimized for efficiency
training_config = TrainingArguments(
    output_dir="./phi-4-mini-finetuned",
    learning_rate=5.0e-06,
    per_device_train_batch_size=4,
    gradient_accumulation_steps=1,
    num_train_epochs=1,
    bf16=True,
    gradient_checkpointing=True,
    warmup_ratio=0.2,
    save_steps=100
)

# Load model and tokenizer
model = AutoModelForCausalLM.from_pretrained(
    "microsoft/Phi-4-mini-instruct",
    torch_dtype=torch.bfloat16,
    trust_remote_code=True
)

tokenizer = AutoTokenizer.from_pretrained("microsoft/Phi-4-mini-instruct")
tokenizer.pad_token = tokenizer.unk_token
tokenizer.padding_side = 'right'

# Load and process dataset
train_dataset = load_dataset("HuggingFaceH4/ultrachat_200k", split="train_sft")

# Initialize trainer
trainer = SFTTrainer(
    model=model,
    args=training_config,
    peft_config=peft_config,
    train_dataset=train_dataset,
    max_seq_length=2048,
    tokenizer=tokenizer,
    packing=True
)

# Start fine-tuning
trainer.train()
```

### Miundo Maalum ya Maagizo

**Kwa Kazi za Udadisi (Phi-4-reasoning-plus):**
```
<|im_start|>system<|im_sep|>
You are Phi, a language model trained by Microsoft to help users. Your role as an assistant involves thoroughly exploring questions through a systematic thinking process before providing the final precise and accurate solutions.

Please structure your response into two main sections:
<think>
{Thought section}
</think>
{Solution section}
<|im_end|>
<|im_start|>user<|im_sep|>
What is the derivative of x^2?
<|im_end|>
<|im_start|>assistant<|im_sep|>
```

**Kwa Kazi za Hisabati (Phi-4-mini-reasoning):**
```
<|system|>
Your name is Phi, an AI math expert developed by Microsoft.
<|end|>
<|user|>
Solve this calculus problem: Find the integral of 2x + 3
<|end|>
<|assistant|>
```

### Utekelezaji wa Simu kwa ONNX

```python
import onnxruntime as ort
import numpy as np

# Load ONNX model for mobile deployment
session = ort.InferenceSession("phi-4-mini-quantized.onnx")

# Prepare input
input_ids = tokenizer.encode("Hello, how are you?", return_tensors="np")

# Run inference
outputs = session.run(None, {"input_ids": input_ids})
predicted_ids = outputs[0]

# Decode response
response = tokenizer.decode(predicted_ids[0], skip_special_tokens=True)
```

## Viwango vya Utendaji na Mafanikio

Familia ya mifano ya Phi imepata utendaji wa ajabu katika viwango mbalimbali, mara nyingi ikizidi mifano mikubwa zaidi:

### Mambo Muhimu ya Utendaji

**Ubora wa Udadisi wa Hisabati:**
- Phi-4 inapata usahihi wa 82.5% kwenye AIME 2025 (mashindano ya kufuzu kwa Olimpiki ya Hisabati)
- Phi-4-reasoning (14B) inazidi DeepSeek-R1-Distill-70B (mara 5 kubwa zaidi) kwenye viwango vya udadisi
- Phi-4-mini-reasoning (3.8B) inalingana na mifano mara mbili ya ukubwa wake kwenye kazi za udadisi wa hisabati

**Mafanikio ya Ufanisi:**
- Phi-3-Silica inapata kasi ya tokeni 650 kwa sekunde kwa matumizi ya nguvu ya 1.5W pekee
- Phi-4-mini (3.8B) inapata utendaji sawa na mifano mikubwa zaidi

**Utendaji wa Viwango:**
- **MMLU (Uelewa wa Lugha wa Kazi Nyingi)**: Utendaji wa ushindani katika masomo 57 ya kitaaluma
- **HumanEval**: Uwezo mkubwa wa kizazi cha msimbo, hasa katika Python
- **MGSM**: Utatuzi wa matatizo ya hesabu ya shule ya msingi kwa lugha nyingi
- **DROP**: Kazi za uelewa na udadisi wa hali ngumu
- **SimpleQA**: Usahihi wa majibu ya ukweli

### ðŸ“Š Jedwali la Ulinganisho wa Mifano

| Mfano | Vigezo | Urefu wa Muktadha | Nguvu Muhimu | Matumizi Bora |
|-------|--------|-------------------|--------------|---------------|
| **Phi-3-mini** | 3.8B | 4K/128K | Ufanisi wa jumla | Programu za simu, chatbots za msingi |
| **Phi-3.5-mini** | 3.8B | 128K | Msaada wa lugha nyingi | Matumizi ya kimataifa |
| **Phi-4-mini** | 3.8B | 128K | Udadisi ulioboreshwa, kupiga simu kwa kazi | Uendeshaji wa biashara |
| **Phi-4-mini-reasoning** | 3.8B | 128K | Udadisi wa hisabati | Majukwaa ya elimu |
| **Phi-4** | 14B | 32K | Udadisi wa hali ngumu | Utafiti, uchambuzi wa hali ya juu |
| **Phi-4-reasoning** | 14B | 32K/64K | Udadisi wa hatua nyingi | Hisabati ya kisayansi |
| **Phi-4-reasoning-plus** | 14B | 32K | Usahihi wa juu wa udadisi | Maamuzi muhimu |
| **Phi-4-multimodal** | 5.6B | Mabadiliko | Sauti, maono, maandishi | Matumizi ya multimedia |

## Mwongozo wa Uchaguzi wa Mfano

### Kwa Matumizi ya Msingi
- **Phi-3-mini**: Kizazi rahisi cha maandishi, maswali na majibu ya msingi, majibu ya haraka
- **Phi-4-mini**: Udadisi ulioboreshwa na uwezo wa kupiga simu kwa kazi

### Kwa Kazi za Hisabati na Udadisi
- **Phi-4**: Utatuzi wa matatizo magumu ya hisabati na udadisi
- **Phi-4-reasoning**: Udadisi wa hatua nyingi na maelezo ya kina
- **Phi-4-reasoning-plus**: Usahihi wa juu kwa matumizi ya udadisi muhimu
- **Phi-4-mini-reasoning**: Udadisi wa hisabati wa ufanisi kwa mazingira yenye rasilimali chache

### Kwa Matumizi ya Multimodal
- **Phi-3-vision**: Mchanganyiko wa usindikaji wa picha na maandishi
- **Phi-4-multimodal**: Uwezo wa kina wa sauti, maono, na maandishi

### Kwa Utekelezaji wa Biashara
- **Phi-3-medium**: Uelewa wa lugha wa hali ya juu kwa matumizi ya biashara
- **Phi-3-Silica**: Imeboreshwa kwa majukwaa maalum ya vifaa

## Majukwaa ya Utekelezaji na Upatikanaji

### Majukwaa ya Wingu
- **Azure AI Foundry**: Utekelezaji kamili na zana za biashara
- **Hugging Face**: Hifadhi ya mifano ya chanzo huria na rasilimali za jamii
- **NVIDIA API Catalog**: Chaguo za utekelezaji wa huduma ndogo

### Mfumo wa Maendeleo ya Kawaida
- **Ollama**: Mfumo mwepesi wa utekelezaji wa mifano ya ndani
- **ONNX Runtime**: Imeboreshwa kwa usanidi mbalimbali wa vifaa  
- **DirectML**: Utendaji ulioboreshwa kwa Windows
- **llama.cpp**: Injini ya uelekezi ya majukwaa mbalimbali

### Rasilimali za Kujifunza
- **Phi Portal**: Kituo rasmi cha nyaraka za Microsoft Phi
- **Phi Cookbook**: Mifano na mafunzo ya kina
- **Ripoti za Kiufundi**: Karatasi za utafiti za kina kwenye arxiv
- **Nafasi za Jamii**: Maonyesho ya maingiliano ya Hugging Face

### Kuanza na Mifano ya Phi

#### Majukwaa ya Maendeleo
1. **Azure AI Foundry**: CLI rahisi ya ndani na usimamizi wa mifano.
2. **Hugging Face Transformers**: Majaribio ya haraka ya ndani
3. **Ollama**: Utekelezaji rahisi wa ndani kwa majaribio

#### Njia ya Kujifunza
1. **Elewa Dhana za Msingi**: Soma kanuni za msingi za muundo
2. **Jaribu Tofauti**: Jaribu mifano tofauti ya Phi ili kuelewa uwezo
3. **Fanya Mazoezi ya Utekelezaji**: Tekeleza mifano katika mazingira ya majaribio
4. **Panua Utekelezaji**: Panua matumizi polepole kulingana na majaribio yaliyofanikiwa

#### Mazoezi Bora
- **Anza Kidogo**: Anza na mifano ya Phi-mini kwa maendeleo ya awali
- **Boresha Maagizo**: Tumia muundo sahihi wa mazungumzo kwa matokeo bora
- **Fuatilia Utendaji**: Angalia kasi ya uelekezi na vipimo vya usahihi
- **Fikiria Vifaa**: Linganisha ukubwa wa mfano na rasilimali za kompyuta zinazopatikana

## Hitimisho

Familia ya mifano ya Microsoft Phi inawakilisha mbinu ya mapinduzi katika muundo wa mifano ya AI, ikionyesha kwamba mifano midogo, yenye ufanisi zaidi inaweza kufanikisha utendaji wa ajabu katika kazi mbalimbali. Kwa kuzingatia data ya mafunzo ya ubora wa juu na uboreshaji wa usanifu, familia ya Phi inatoa uwezo wa kipekee huku ikipunguza mahitaji ya kompyuta kwa kiasi kikubwa ikilinganishwa na mifano mikubwa ya lugha ya jadi.

## Malengo Muhimu ya Kujifunza

1. Elewa falsafa ya muundo na mageuzi ya familia ya mifano ya Microsoft Phi kutoka Phi-1 hadi Phi-4
2. Tambua ubunifu muhimu, ikiwa ni pamoja na mafunzo ya "ubora wa kitabu" na uboreshaji wa usanifu
3. Tambua faida na mapungufu ya tofauti za Phi katika hali tofauti za utekelezaji
4. Tumia maarifa kuchagua mifano sahihi ya Phi kwa matumizi maalum na vikwazo vya vifaa
5. Tekeleza mbinu za uboreshaji kwa kutumia mifano ya Phi kwenye vifaa vyenye rasilimali chache
6. Eleza faida za usanifu wa familia ya mifano ya Phi ikilinganishwa na mifano mikubwa ya lugha ya jadi
7. Chagua tofauti sahihi ya Phi kulingana na mahitaji maalum ya programu na vikwazo vya vifaa
8. Tekeleza mifano ya Phi katika hali za utekelezaji wa wingu na ukingo kwa usanidi ulioboreshwa
9. Tumia mbinu za kupunguza ukubwa na uboreshaji ili kuboresha utendaji wa mifano ya Phi kwenye vifaa lengwa
10. Tathmini faida na hasara kati ya ukubwa wa mfano, utendaji, na uwezo katika familia ya Phi

## Nini kinachofuata

- [02: Misingi ya Familia ya Qwen](02.QwenFamily.md)

---

**Kanusho**:  
Hati hii imetafsiriwa kwa kutumia huduma ya tafsiri ya AI [Co-op Translator](https://github.com/Azure/co-op-translator). Ingawa tunajitahidi kuhakikisha usahihi, tafsiri za kiotomatiki zinaweza kuwa na makosa au kutokuwa sahihi. Hati ya asili katika lugha yake ya awali inapaswa kuchukuliwa kama chanzo cha mamlaka. Kwa taarifa muhimu, tafsiri ya kitaalamu ya binadamu inapendekezwa. Hatutawajibika kwa kutoelewana au tafsiri zisizo sahihi zinazotokana na matumizi ya tafsiri hii.