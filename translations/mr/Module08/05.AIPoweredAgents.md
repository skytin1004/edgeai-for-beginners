<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "a534c7d108d29f908a8f9f693d694664",
  "translation_date": "2025-09-24T15:14:32+00:00",
  "source_file": "Module08/05.AIPoweredAgents.md",
  "language_code": "mr"
}
-->
# рд╕рддреНрд░ рел: Foundry Local рд╕рд╣ AI-рд╕рдХреНрд╖рдо рдПрдЬрдВрдЯреНрд╕ рдЬрд▓рдж рддрдпрд╛рд░ рдХрд░рд╛

рдЯреАрдк: Foundry Local рдордзреАрд▓ рдПрдЬрдВрдЯ рдХреНрд╖рдорддрд╛рдВрдордзреНрдпреЗ рд╕реБрдзрд╛рд░рдгрд╛ рд╣реЛрдд рдЕрд╕рддрд╛рддтАФрдкреНрд░рдЧрдд рдкрджреНрдзрддреА рдЕрдВрдорд▓рд╛рдд рдЖрдгрдгреНрдпрд╛рдкреВрд░реНрд╡реА рдирд╡реАрдирддрдо рд░рд┐рд▓реАрдЭ рдиреЛрдЯреНрд╕рдордзреНрдпреЗ рд╕рдорд░реНрдердирд╛рдЪреА рдкреБрд╖реНрдЯреА рдХрд░рд╛.

## рдЖрдврд╛рд╡рд╛

Foundry Local рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВрди рдПрдЬрдВрдЯрд┐рдХ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдЬрд▓рдж рдкреНрд░реЛрдЯреЛрдЯрд╛рдЗрдк рдХрд░рд╛: рд╕рд┐рд╕реНрдЯрдо рдкреНрд░реЙрдореНрдкреНрдЯреНрд╕, рдЧреНрд░рд╛рдЙрдВрдбрд┐рдВрдЧ, рдЖрдгрд┐ рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрд╢рди рдкрджреНрдзрддреА. рдЬреЗрд╡реНрд╣рд╛ рдПрдЬрдВрдЯ рд╕рдорд░реНрдерди рдЙрдкрд▓рдмреНрдз рдЕрд╕реЗрд▓, рддреЗрд╡реНрд╣рд╛ OpenAI-рд╕реБрд╕рдВрдЧрдд рдлрдВрдХреНрд╢рди рдХреЙрд▓рд┐рдВрдЧрд╡рд░ рдорд╛рдирдХреАрдХрд░рдг рдХрд░рд╛ рдХрд┐рдВрд╡рд╛ рд╣рд╛рдпрдмреНрд░рд┐рдб рдбрд┐рдЭрд╛рдЗрдиреНрд╕рдордзреНрдпреЗ Azure AI Agents рдЪрд╛ рдХреНрд▓рд╛рдЙрдб рд╕рд╛рдЗрдбрд╡рд░ рд╡рд╛рдкрд░ рдХрд░рд╛.

> **ЁЯФД рдЖрдзреБрдирд┐рдХ SDK рд╕рд╛рдареА рдЕрджреНрдпрддрдирд┐рдд**: рд╣рд╛ рдореЙрдбреНрдпреВрд▓ рдирд╡реАрдирддрдо Microsoft Foundry-Local рд░рд┐рдкреЙрдЭрд┐рдЯрд░реА рдкрджреНрдзрддреАрдВрд╢реА рд╕рдВрд░реЗрдЦрд┐рдд рдХреЗрд▓рд╛ рдЧреЗрд▓рд╛ рдЖрд╣реЗ рдЖрдгрд┐ `samples/05/` рдордзреАрд▓ рд╕рд░реНрд╡рд╕рдорд╛рд╡реЗрд╢рдХ рдЕрдВрдорд▓рдмрдЬрд╛рд╡рдгреАрд╢реА рдЬреБрд│рддреЛ. рдЙрджрд╛рд╣рд░рдгреЗ рдЖрддрд╛ рдЖрдзреБрдирд┐рдХ `foundry-local-sdk` рдЖрдгрд┐ `OpenAI` рдХреНрд▓рд╛рдпрдВрдЯрдЪрд╛ рд╡рд╛рдкрд░ рдХрд░рддрд╛рдд, рдореЕрдиреНрдпреБрдЕрд▓ рд╡рд┐рдирдВрддреНрдпрд╛рдВрдРрд╡рдЬреА.

**ЁЯПЧя╕П рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рд╣рд╛рдпрд▓рд╛рдЗрдЯреНрд╕:**
- **рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдПрдЬрдВрдЯреНрд╕**: рд░рд┐рдЯреНрд░реАрд╡реНрд╣рд▓, рд░рд┐рдЭрдирд┐рдВрдЧ, рдЖрдгрд┐ рдПрдХреНрдЭрд┐рдХреНрдпреБрд╢рди рдПрдЬрдВрдЯреНрд╕ рд╡реЗрдЧрд╡реЗрдЧрд│реНрдпрд╛ рдХреНрд╖рдорддрд╛рдВрд╕рд╣
- **рдХреЛрдСрд░реНрдбрд┐рдиреЗрдЯрд░ рдкреЕрдЯрд░реНрди**: рдлреАрдбрдмреЕрдХ рд▓реВрдкрд╕рд╣ рдорд▓реНрдЯреА-рдПрдЬрдВрдЯ рд╡рд░реНрдХрдлреНрд▓реЛрдЬ рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрдЯ рдХрд░рддреЛ
- **рдЖрдзреБрдирд┐рдХ SDK рдПрдХрддреНрд░реАрдХрд░рдг**: `FoundryLocalManager` рдЖрдгрд┐ OpenAI рдХреНрд▓рд╛рдпрдВрдЯрдЪрд╛ рд╡рд╛рдкрд░
- **рдЙрддреНрдкрд╛рджрдирд╛рд╕рд╛рдареА рддрдпрд╛рд░**: рддреНрд░реБрдЯреА рд╣рд╛рддрд╛рд│рдгреА, рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдирд┐рд░реАрдХреНрд╖рдг, рдЖрдгрд┐ рдЖрд░реЛрдЧреНрдп рддрдкрд╛рд╕рдгреА рд╕рдорд╛рд╡рд┐рд╖реНрдЯ
- **рд╕рд░реНрд╡рд╕рдорд╛рд╡реЗрд╢рдХ рдЙрджрд╛рд╣рд░рдгреЗ**: рдкреНрд░рдЧрдд рд╡реИрд╢рд┐рд╖реНрдЯреНрдпрд╛рдВрд╕рд╣ рдЗрдВрдЯрд░рдПрдХреНрдЯрд┐рд╡реНрд╣ Jupyter рдиреЛрдЯрдмреБрдХ

**ЁЯУБ рд╕реНрдерд╛рдирд┐рдХ рдЕрдВрдорд▓рдмрдЬрд╛рд╡рдгреА:**
- `samples/05/multi_agent_orchestration.ipynb` - рдЗрдВрдЯрд░рдПрдХреНрдЯрд┐рд╡реНрд╣ рдЙрджрд╛рд╣рд░рдгреЗ рдЖрдгрд┐ рдмреЗрдВрдЪрдорд╛рд░реНрдХреНрд╕
- `samples/05/agents/specialists.py` - рдПрдЬрдВрдЯ рдЕрдВрдорд▓рдмрдЬрд╛рд╡рдгреА
- `samples/05/agents/coordinator.py` - рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрд╢рди рд▓реЙрдЬрд┐рдХ

рд╕рдВрджрд░реНрдн:
- Foundry Local рджрд╕реНрддрдРрд╡рдЬ: https://learn.microsoft.com/en-us/azure/ai-foundry/foundry-local/
- Azure AI Foundry Agents: https://learn.microsoft.com/en-us/azure/ai-services/agents/overview
- рдлрдВрдХреНрд╢рди рдХреЙрд▓рд┐рдВрдЧ рдирдореБрдирд╛ (Foundry Local рдирдореБрдиреЗ): https://github.com/microsoft/Foundry-Local/tree/main/samples/python/functioncalling

## рд╢рд┐рдХрдгреНрдпрд╛рдЪреА рдЙрджреНрджрд┐рд╖реНрдЯреЗ
- рд╡рд┐рд╢реНрд╡рд╛рд╕рд╛рд░реНрд╣ рд╡рд░реНрддрдирд╛рд╕рд╛рдареА рд╕рд┐рд╕реНрдЯрдо рдкреНрд░реЙрдореНрдкреНрдЯреНрд╕ рдЖрдгрд┐ рдЧреНрд░рд╛рдЙрдВрдбрд┐рдВрдЧ рдзреЛрд░рдгреЗ рдбрд┐рдЭрд╛рдЗрди рдХрд░рд╛
- рдлрдВрдХреНрд╢рди рдХреЙрд▓рд┐рдВрдЧ (рдЯреВрд▓ рд╡рд╛рдкрд░) рдкрджреНрдзрддреА рдЕрдВрдорд▓рд╛рдд рдЖрдгрд╛
- рдорд▓реНрдЯреА-рдПрдЬрдВрдЯ рд╡рд░реНрдХрдлреНрд▓реЛрдЬ (рд╕реНрдерд╛рдирд┐рдХ рдЖрдгрд┐ рд╣рд╛рдпрдмреНрд░рд┐рдб) рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрдЯ рдХрд░рд╛
- рдирд┐рд░реАрдХреНрд╖рдгрдХреНрд╖рдорддрд╛ рдЖрдгрд┐ рд╕реБрд░рдХреНрд╖рд┐рддрддреЗрд╕рд╛рдареА рдпреЛрдЬрдирд╛ рдХрд░рд╛

## рднрд╛рдЧ рез: рд╕рд┐рд╕реНрдЯрдо рдкреНрд░реЙрдореНрдкреНрдЯреНрд╕ рдЖрдгрд┐ рдЧреНрд░рд╛рдЙрдВрдбрд┐рдВрдЧ

- рдХрдареЛрд░ рднреВрдорд┐рдХрд╛, рдирд┐рд░реНрдмрдВрдз, рдЖрдгрд┐ рдЖрдЙрдЯрдкреБрдЯ рд╕реНрдХреАрдорд╛рдВрдЪреА рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХрд░рд╛
- рд╕реНрдерд╛рдирд┐рдХ рдХрд┐рдВрд╡рд╛ рдПрдВрдЯрд░рдкреНрд░рд╛рдЗрдЭ рдбреЗрдЯрд╛рд╕рд╣ рдкреНрд░рддрд┐рд╕рд╛рдж рдЧреНрд░рд╛рдЙрдВрдб рдХрд░рд╛
- рдбрд╛рдЙрдирд╕реНрдЯреНрд░реАрдо рдСрдЯреЛрдореЗрд╢рдирд╕рд╛рдареА JSON рдЖрдЙрдЯрдкреБрдЯреНрд╕ рд▓рд╛рдЧреВ рдХрд░рд╛

## рднрд╛рдЧ реи: рдлрдВрдХреНрд╢рди рдХреЙрд▓рд┐рдВрдЧ (рдЖрдзреБрдирд┐рдХ SDK рджреГрд╖реНрдЯрд┐рдХреЛрди)

```python
# tools.py
import json
from typing import List, Dict, Any

def get_weather(city: str) -> str:
    return f"Weather in {city}: Sunny, 25C"

# Modern tools format for OpenAI API
TOOLS = [
    {
        "type": "function",
        "function": {
            "name": "get_weather",
            "description": "Get current weather for a city",
            "parameters": {
                "type": "object",
                "properties": {
                    "city": {"type": "string", "description": "City name"}
                },
                "required": ["city"]
            }
        }
    }
]
```

```python
# agent.py
from foundry_local import FoundryLocalManager
from openai import OpenAI
import json
from tools import TOOLS, get_weather

# Initialize Foundry Local Manager
alias = "phi-4-mini"
manager = FoundryLocalManager(alias)

# Create OpenAI client using Foundry Local endpoint
client = OpenAI(
    base_url=manager.endpoint,
    api_key=manager.api_key
)

SYSTEM_PROMPT = "You are a helpful assistant. Use tools when needed."

def process_function_call(messages: List[Dict], tools: List[Dict]) -> str:
    """Process function calling with modern OpenAI API."""
    try:
        response = client.chat.completions.create(
            model=manager.get_model_info(alias).id,
            messages=messages,
            tools=tools,
            tool_choice="auto"
        )
        
        message = response.choices[0].message
        
        if message.tool_calls:
            # Handle function calls
            messages.append(message)
            
            for tool_call in message.tool_calls:
                if tool_call.function.name == "get_weather":
                    args = json.loads(tool_call.function.arguments)
                    result = get_weather(args["city"])
                    
                    # Add function result to messages
                    messages.append({
                        "role": "tool",
                        "tool_call_id": tool_call.id,
                        "content": result
                    })
            
            # Get final response
            final_response = client.chat.completions.create(
                model=manager.get_model_info(alias).id,
                messages=messages
            )
            return final_response.choices[0].message.content
        else:
            return message.content
            
    except Exception as e:
        return f"Error: {str(e)}"

# Example usage
messages = [
    {"role": "system", "content": SYSTEM_PROMPT},
    {"role": "user", "content": "What's the weather in Paris?"}
]

result = process_function_call(messages, TOOLS)
print(result)
```

рдЪрд╛рд▓рд╡рд╛:
```powershell
# Ensure Foundry Local is running with a model
foundry model run phi-4-mini
python agent.py
```


## рднрд╛рдЧ рей: рдорд▓реНрдЯреА-рдПрдЬрдВрдЯ рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрд╢рди (рдкреЕрдЯрд░реНрди)

Foundry Local рдЪреНрдпрд╛ OpenAI-рд╕реБрд╕рдВрдЧрдд рдПрдиреНрдбрдкреЙрдЗрдВрдЯрдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВрди, рд╡рд┐рд╢реЗрд╖ рдПрдЬрдВрдЯреНрд╕ (рд░рд┐рдЯреНрд░реАрд╡реНрд╣рд▓, рд░рд┐рдЭрдирд┐рдВрдЧ, рдПрдХреНрдЭрд┐рдХреНрдпреБрд╢рди) рдХрдбреЗ рдХрд╛рд░реНрдпреЗ рд░реВрдЯ рдХрд░рдгрд╛рд░рд╛ рдХреЛрдСрд░реНрдбрд┐рдиреЗрдЯрд░ рдбрд┐рдЭрд╛рдЗрди рдХрд░рд╛.

рдкрд╛рдпрд░реА рез) рдЖрдзреБрдирд┐рдХ SDK рд╕рд╣ рд╡рд┐рд╢реЗрд╖ рдПрдЬрдВрдЯреНрд╕ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рд╛ (`samples/05/agents/specialists.py` рдкрд╣рд╛)
```python
# agents/specialists.py
from foundry_local import FoundryLocalManager
from openai import OpenAI
from typing import List, Dict, Any

class FoundryClient:
    """Shared client for all specialist agents."""
    
    def __init__(self, model_alias: str = "phi-4-mini"):
        self.client = None
        self.model_name = None
        self.model_alias = model_alias
        self._initialize_client()
    
    def _initialize_client(self):
        """Initialize OpenAI client with Foundry Local."""
        try:
            manager = FoundryLocalManager(self.model_alias)
            model_info = manager.get_model_info(self.model_alias)
            
            self.client = OpenAI(
                base_url=manager.endpoint,
                api_key=manager.api_key
            )
            self.model_name = model_info.id
            print(f"тЬЕ Foundry Local initialized with model: {self.model_name}")
        except Exception as e:
            print(f"тЭМ Error initializing Foundry Local: {e}")
            raise
    
    def chat(self, messages: List[Dict[str, str]], max_tokens: int = 300, temperature: float = 0.4) -> str:
        """Send chat completion request to the model."""
        try:
            response = self.client.chat.completions.create(
                model=self.model_name,
                messages=messages,
                max_tokens=max_tokens,
                temperature=temperature
            )
            return response.choices[0].message.content
        except Exception as e:
            return f"Error generating response: {str(e)}"

# Global client instance
_client = FoundryClient()

class RetrievalAgent:
    """Agent specialized in retrieving relevant information from knowledge sources."""
    
    SYSTEM = """You are a specialized retrieval agent. Your job is to extract and retrieve 
    the most relevant information from knowledge sources based on a given query. Focus on key facts, 
    data points, and contextual information that would be useful for decision-making."""
    
    def run(self, query: str) -> str:
        """Retrieve relevant information based on the query."""
        messages = [
            {"role": "system", "content": self.SYSTEM},
            {"role": "user", "content": f"Query: {query}\n\nRetrieve the most relevant key facts, data points, and contextual information that would help answer this query or support decision-making around it."}
        ]
        return _client.chat(messages)

class ReasoningAgent:
    """Agent specialized in step-by-step analysis and reasoning."""
    
    SYSTEM = """You are a specialized reasoning agent. Your job is to analyze inputs 
    step-by-step and produce structured, logical conclusions. Break down complex problems 
    into manageable parts and provide clear reasoning for your conclusions."""
    
    def run(self, context: str, question: str) -> str:
        """Analyze context and question to produce structured conclusions."""
        messages = [
            {"role": "system", "content": self.SYSTEM},
            {"role": "user", "content": f"Context:\n{context}\n\nQuestion: {question}\n\nAnalyze this step-by-step and provide a structured, logical conclusion with clear reasoning."}
        ]
        return _client.chat(messages, max_tokens=400)

class ExecutionAgent:
    """Agent specialized in creating actionable execution plans."""
    
    SYSTEM = """You are a specialized execution agent. Your job is to transform decisions 
    and conclusions into concrete, actionable steps. Always format your response as valid JSON 
    with an array of action items. Each action should be specific, measurable, and achievable."""
    
    def run(self, decision: str) -> str:
        """Transform decision into actionable steps in JSON format."""
        messages = [
            {"role": "system", "content": self.SYSTEM},
            {"role": "user", "content": f"Decision/Conclusion:\n{decision}\n\nCreate 3-5 specific, actionable steps to implement this decision. Format as JSON with this structure:\n{{\"actions\": [{{\"step\": 1, \"description\": \"...\", \"priority\": \"high/medium/low\", \"timeline\": \"...\"}}]}}"}
        ]
        return _client.chat(messages, max_tokens=400, temperature=0.3)
```

рдкрд╛рдпрд░реА реи) рдкреНрд░рдЧрдд рд╡реИрд╢рд┐рд╖реНрдЯреНрдпрд╛рдВрд╕рд╣ рдХреЛрдСрд░реНрдбрд┐рдиреЗрдЯрд░ рддрдпрд╛рд░ рдХрд░рд╛
```python
# agents/coordinator.py
from .specialists import RetrievalAgent, ReasoningAgent, ExecutionAgent
from typing import Dict, Any
import time
import json

class Coordinator:
    """Multi-agent coordinator that orchestrates specialist agents to handle complex tasks."""
    
    def __init__(self):
        """Initialize the coordinator with specialist agents."""
        self.retrieval = RetrievalAgent()
        self.reasoning = ReasoningAgent()
        self.execution = ExecutionAgent()
    
    def handle(self, user_goal: str) -> Dict[str, Any]:
        """
        Orchestrate multiple agents to handle a complex user goal.
        
        Args:
            user_goal: The user's high-level goal or request
            
        Returns:
            Dictionary containing the goal, context, decision, and actions
        """
        print(f"ЁЯОп **Coordinator:** Processing goal: {user_goal}")
        print("=" * 60)
        
        start_time = time.time()
        
        # Step 1: Retrieve relevant context
        print("ЁЯУЪ **Step 1:** Retrieving context...")
        context = self.retrieval.run(user_goal)
        print(f"   тЬЕ Context retrieved ({len(context)} chars)")
        
        # Step 2: Analyze and reason about the context
        print("ЁЯза **Step 2:** Analyzing and reasoning...")
        decision = self.reasoning.run(context, user_goal)
        print(f"   тЬЕ Analysis completed ({len(decision)} chars)")
        
        # Step 3: Create actionable execution plan
        print("тЪб **Step 3:** Creating execution plan...")
        actions = self.execution.run(decision)
        print(f"   тЬЕ Execution plan created ({len(actions)} chars)")
        
        end_time = time.time()
        processing_time = end_time - start_time
        
        result = {
            "goal": user_goal,
            "context": context,
            "decision": decision,
            "actions": actions,
            "agent_flow": ["retrieval", "reasoning", "execution"],
            "processing_time": processing_time,
            "timestamp": time.strftime("%Y-%m-%d %H:%M:%S")
        }
        
        print(f"тЬЕ **Coordination Complete** (тП▒я╕П {processing_time:.2f}s)")
        return result
    
    def handle_with_feedback(self, user_goal: str, feedback_rounds: int = 1) -> Dict[str, Any]:
        """
        Handle a goal with multiple feedback rounds for refinement.
        
        Args:
            user_goal: The user's high-level goal or request
            feedback_rounds: Number of feedback rounds to perform
            
        Returns:
            Dictionary containing the refined result
        """
        result = self.handle(user_goal)
        
        for round_num in range(feedback_rounds):
            print(f"\nЁЯФД **Feedback Round {round_num + 1}:**")
            print("-" * 40)
            
            # Use reasoning agent to refine the execution plan
            refinement_prompt = f"""
            Original Goal: {user_goal}
            Current Decision: {result['decision']}
            Current Actions: {result['actions']}
            
            Review the above and suggest improvements or refinements to make the execution plan more effective.
            """
            
            refined_decision = self.reasoning.run(result['context'], refinement_prompt)
            refined_actions = self.execution.run(refined_decision)
            
            result['decision'] = refined_decision
            result['actions'] = refined_actions
            result['refinement_rounds'] = round_num + 1
            
            print(f"   тЬЕ Round {round_num + 1} refinement completed")
        
        return result

def main():
    """Main function demonstrating the multi-agent coordinator."""
    print("ЁЯдЦ **Multi-Agent Coordinator Demo**")
    print("=" * 50)
    
    # Create coordinator
    coord = Coordinator()
    
    # Example goals
    example_goals = [
        "Create a plan to onboard 5 new customers this month",
        "Develop a strategy to improve team productivity by 20%",
        "Design a customer feedback collection system"
    ]
    
    # Process example with feedback
    goal = example_goals[0]
    print(f"ЁЯОп **Processing Goal:** {goal}")
    print("-" * 50)
    
    try:
        # Basic processing
        result = coord.handle(goal)
        
        # With feedback refinement
        refined_result = coord.handle_with_feedback(goal, feedback_rounds=1)
        
        print("\nЁЯУК **Final Result:**")
        print("=" * 50)
        print(f"**Goal:** {refined_result['goal']}")
        print(f"**Processing Time:** {refined_result['processing_time']:.2f}s")
        
        # Try to parse actions as JSON
        try:
            actions_json = json.loads(refined_result['actions'])
            print(f"\n**Formatted Actions:**")
            print(json.dumps(actions_json, indent=2))
        except (json.JSONDecodeError, TypeError):
            print(f"\n**Actions:** {refined_result['actions']}")
            
    except Exception as e:
        print(f"тЭМ **Error:** {e}")
        print("\nPlease ensure Foundry Local is running with a model loaded.")

if __name__ == "__main__":
    main()
```

рдкрд╛рдпрд░реА рей) Foundry Local рд╡рд┐рд░реБрджреНрдз рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛ рдЖрдгрд┐ рдирдореБрдиреЗ рдЪрд╛рд▓рд╡рд╛
```powershell
REM Confirm the local endpoint and model are available
foundry model list
foundry model run phi-4-mini
curl http://localhost:8000/v1/models

REM Run the coordinator from Module08 directory
cd Module08
python -m samples.05.agents.coordinator

REM Or explore the comprehensive Jupyter notebook
jupyter notebook samples/05/multi_agent_orchestration.ipynb
```


> **ЁЯУЪ рд╕реНрдерд╛рдирд┐рдХ рдирдореБрдирд╛ рд╕рдВрджрд░реНрдн:**
> - **рдореБрдЦреНрдп рдЕрдВрдорд▓рдмрдЬрд╛рд╡рдгреА**: `samples/05/agents/specialists.py` рдЖрдгрд┐ `samples/05/agents/coordinator.py`
> - **рд╕рд░реНрд╡рд╕рдорд╛рд╡реЗрд╢рдХ рдЙрджрд╛рд╣рд░рдгреЗ**: `samples/05/multi_agent_orchestration.ipynb`
> - **рд╕реЗрдЯрдЕрдк рд╕реВрдЪрдирд╛**: `samples/05/README.md`
> 
> **ЁЯФЧ рд╕рдВрдмрдВрдзрд┐рдд Foundry Local рдирдореБрдиреЗ:**
> - [рдлрдВрдХреНрд╢рди рдХреЙрд▓рд┐рдВрдЧ рдирдореБрдирд╛](https://github.com/microsoft/Foundry-Local/tree/main/samples/python/functioncalling)
> - [Hello Foundry Local](https://github.com/microsoft/Foundry-Local/tree/main/samples/python/hello-foundry-local)

рдорд╛рд░реНрдЧрджрд░реНрд╢рдХ рддрддреНрддреНрд╡реЗ:
- рдПрдЬрдВрдЯреНрд╕ рджрд░рдореНрдпрд╛рди рдкреБрдирдГрдкреНрд░рдпрддреНрди рдЖрдгрд┐ рдЯрд╛рдЗрдордЖрдЙрдЯреНрд╕ рдЕрдВрдорд▓рд╛рдд рдЖрдгрд╛
- рд╕рдВрднрд╛рд╖рдг/рдереНрд░реЗрдб рд╕реНрдерд┐рддреАрд╕рд╛рдареА рд▓рд╣рд╛рди рдЗрди-рдореЗрдорд░реА рд╕реНрдЯреЛрдЕрд░ (dict) рдЬреЛрдбрд╛
- рдЕрдиреЗрдХ рдХреЙрд▓реНрд╕ рдЪреЗрди рдХрд░рддрд╛рдирд╛ рджрд░рдорд░реНрдпрд╛рджрд╛ рд▓рд╛рдЧреВ рдХрд░рд╛

## рднрд╛рдЧ рек: рдирд┐рд░реАрдХреНрд╖рдгрдХреНрд╖рдорддрд╛ рдЖрдгрд┐ рд╕реБрд░рдХреНрд╖рд┐рддрддрд╛

рдкреНрд░реЙрдореНрдкреНрдЯреНрд╕, рдкреНрд░рддрд┐рд╕рд╛рдж, рдЖрдгрд┐ рддреНрд░реБрдЯреА рд╕реНрдерд╛рдирд┐рдХ рдкрд╛рддрд│реАрд╡рд░ рдЯреНрд░реЕрдХ рдХрд░рд╛, рддрд╕реЗрдЪ рдЖрдкрд▓реНрдпрд╛ рдПрдЬрдВрдЯ рд╕реНрдЯреЕрдХрдордзреНрдпреЗ рдбреЗрдЯрд╛ рд╕реНрд╡рдЪреНрдЫрддрд╛ рд▓рд╛рдЧреВ рдХрд░рд╛.

рдкрд╛рдпрд░реА рез) рд╣рд▓рдХреЗ рд╡рд┐рдирдВрддреА рд▓реЙрдЧрд┐рдВрдЧ (рдкрд░реНрдпрд╛рдпреА)

рдЯреАрдк: рдЦрд╛рд▓реАрд▓ рд╕рд╣рд╛рдпреНрдпрдХ рдбреАрдлреЙрд▓реНрдЯрдиреБрд╕рд╛рд░ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдирд╛рд╣реА. рд╕реНрдерд╛рдирд┐рдХ JSON рд▓реЙрдЧрд┐рдВрдЧрд╕рд╛рдареА `infra/obs.py` рддрдпрд╛рд░ рдХрд░рд╛.
```python
# infra/obs.py
import time, json, os
from datetime import datetime

LOG_DIR = os.getenv("FOUNDRY_AGENT_LOG_DIR", "./agent_logs")
os.makedirs(LOG_DIR, exist_ok=True)

def log_event(kind: str, payload: dict):
    ts = datetime.utcnow().strftime("%Y%m%dT%H%M%SZ")
    path = os.path.join(LOG_DIR, f"{ts}_{kind}.json")
    with open(path, "w", encoding="utf-8") as f:
        json.dump(payload, f, ensure_ascii=False, indent=2)
```

рдПрдЬрдВрдЯреНрд╕рдордзреНрдпреЗ рд▓реЙрдЧрд┐рдВрдЧ рд╕рдорд╛рдХрд▓рд┐рдд рдХрд░рд╛ (рдкрд░реНрдпрд╛рдпреА):
```python
# in agents/specialists.py after receiving content
from infra.obs import log_event
# ... inside chat(...)
resp = r.json()
log_event("chat_request", {"endpoint": f"{BASE_URL}/v1/chat/completions"})
log_event("chat_response", resp)
return resp["choices"][0]["message"]["content"]
```

рдкрд╛рдпрд░реА реи) CLI рджреНрд╡рд╛рд░реЗ рдЙрдкрд▓рдмреНрдзрддрд╛ рдЖрдгрд┐ рдореВрд▓рднреВрдд рдЖрд░реЛрдЧреНрдп рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛
```powershell
REM Ensure Foundry Local is running a model
foundry model list
foundry model run phi-4-mini

REM Validate the OpenAI-compatible endpoint
curl http://localhost:8000/v1/models
```

рдкрд╛рдпрд░реА рей) рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдорд╛рд╣рд┐рддреАрдЪреА рд╕реНрд╡рдЪреНрдЫрддрд╛ рдЖрдгрд┐ PII рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди
- рдореЙрдбреЗрд▓рд▓рд╛ рд╕рдВрджреЗрд╢ рдкрд╛рдард╡рдгреНрдпрд╛рдкреВрд░реНрд╡реА рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдлреАрд▓реНрдбреНрд╕ (рдИрдореЗрд▓реНрд╕, рдлреЛрди рдирдВрдмрд░, рдЖрдпрдбреА) рдХрд╛рдврд╛ рдХрд┐рдВрд╡рд╛ рд╣реЕрд╢ рдХрд░рд╛
- рдХрдЪреНрдЪрд╛ рд╕реНрд░реЛрдд рдбреЗрдЯрд╛ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд╡рд░ рдареЗрд╡рд╛, рдлрдХреНрдд рдЖрд╡рд╢реНрдпрдХ рд╕рдВрджрд░реНрдн рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рдкрд╛рдард╡рд╛

рдЙрджрд╛рд╣рд░рдг рд╕реНрд╡рдЪреНрдЫрддрд╛ рд╕рд╣рд╛рдпреНрдпрдХ:
```python
# infra/redact.py
import re
EMAIL_RE = re.compile(r"[\w\.-]+@[\w\.-]+")
PHONE_RE = re.compile(r"\+?\d[\d\s\-]{7,}\d")

def sanitize(text: str) -> str:
    text = EMAIL_RE.sub("[REDACTED_EMAIL]", text)
    text = PHONE_RE.sub("[REDACTED_PHONE]", text)
    return text
```

рдПрдЬрдВрдЯреНрд╕рдордзреНрдпреЗ рд╡рд╛рдкрд░рд╛:
```python
from infra.redact import sanitize
# user_goal = sanitize(user_goal)
# context = sanitize(context)
```

рдкрд╛рдпрд░реА рек) рд╕рд░реНрдХрд┐рдЯ рдмреНрд░реЗрдХрд░реНрд╕ рдЖрдгрд┐ рддреНрд░реБрдЯреА рд╣рд╛рддрд╛рд│рдгреА
- рдкреНрд░рддреНрдпреЗрдХ рдПрдЬрдВрдЯ рдХреЙрд▓ try/except рдЖрдгрд┐ рдПрдХреНрд╕реНрдкреЛрдиреЗрдВрд╢рд┐рдпрд▓ рдмреЕрдХрдСрдлрд╕рд╣ рд▓рдкреЗрдЯрд╛
- рд╡рд╛рд░рдВрд╡рд╛рд░ рдЕрдкрдпрд╢рд╛рдВрд╡рд░ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рд╢реЙрд░реНрдЯ-рд╕рд░реНрдХрд┐рдЯ рдХрд░рд╛

```python
import time

def with_retry(func, retries=3, base_delay=0.5):
    for i in range(retries):
        try:
            return func()
        except Exception as e:
            if i == retries - 1:
                raise
            time.sleep(base_delay * (2 ** i))
```

рдкрд╛рдпрд░реА рел) рд╕реНрдерд╛рдирд┐рдХ рдСрдбрд┐рдЯ рдЯреНрд░реЗрд▓ рдЖрдгрд┐ рдирд┐рд░реНрдпрд╛рдд
- JSON рд▓реЙрдЧреНрд╕ `./agent_logs` рдЕрдВрддрд░реНрдЧрдд рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХрд░рд╛
- рд▓реЙрдЧреНрд╕ рд╡реЗрд│реЛрд╡реЗрд│реА рд╕рдВрдХреБрдЪрд┐рдд рдЖрдгрд┐ рдлрд┐рд░рд╡рд╛
- рдкреБрдирд░рд╛рд╡рд▓реЛрдХрдирд╛рдВрд╕рд╛рдареА рд╕рд╛рд░рд╛рдВрд╢ рдирд┐рд░реНрдпрд╛рдд рдХрд░рд╛ (рдореЛрдЬрдгреА, рд╕рд░рд╛рд╕рд░реА рд╡рд┐рд▓рдВрдм, рддреНрд░реБрдЯреА рджрд░)

рдкрд╛рдпрд░реА рем) Microsoft Learn рджрд╕реНрддрдРрд╡рдЬрд╛рдВрд╕рд╣ рдХреНрд░реЙрд╕-рдЪреЗрдХ рдХрд░рд╛
- Foundry Local OpenAI-рд╕реБрд╕рдВрдЧрдд API рдкреНрд░рджрд╛рди рдХрд░рддреЛ (`curl /v1/models` рд╕рд╣ рд╕рддреНрдпрд╛рдкрд┐рдд)
- `foundry model run <name>` рд╡рд╛рдкрд░реВрди рдореЙрдбреЗрд▓ рдЙрдкрд▓рдмреНрдзрддрд╛ рдкреБрд╖реНрдЯреА рдХрд░рд╛
- рдХреНрд▓рд╛рдпрдВрдЯ рдПрдХрддреНрд░реАрдХрд░рдг рдЖрдгрд┐ рдирдореБрдирд╛ рдЕрдиреБрдкреНрд░рдпреЛрдЧрд╛рдВрд╕рд╛рдареА рдЕрдзрд┐рдХреГрдд рдорд╛рд░реНрдЧрджрд░реНрд╢рдирд╛рдЪреЗ рдЕрдиреБрд╕рд░рдг рдХрд░рд╛ (Open WebUI/how-tos)

рд╕рдВрджрд░реНрдн:
- **Foundry Local рджрд╕реНрддрдРрд╡рдЬ**: https://learn.microsoft.com/en-us/azure/ai-foundry/foundry-local/
- **Azure AI Agents**: https://learn.microsoft.com/en-us/azure/ai-services/agents/overview
- **рд╕реНрдерд╛рдирд┐рдХ рдирдореБрдиреЗ**:
  - рдорд▓реНрдЯреА-рдПрдЬрдВрдЯ рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрд╢рди: `Module08/samples/05/multi_agent_orchestration.ipynb`
  - рдПрдЬрдВрдЯ рдЕрдВрдорд▓рдмрдЬрд╛рд╡рдгреА: `Module08/samples/05/agents/`
  - рдирдореБрдирд╛ README: `Module08/samples/05/README.md`
- **рдЕрдзрд┐рдХреГрдд Microsoft рдирдореБрдиреЗ**:
  - [рдлрдВрдХреНрд╢рди рдХреЙрд▓рд┐рдВрдЧ](https://github.com/microsoft/Foundry-Local/tree/main/samples/python/functioncalling)
  - [Hello Foundry Local](https://github.com/microsoft/Foundry-Local/tree/main/samples/python/hello-foundry-local)
  - [Foundry Local Python SDK](https://github.com/microsoft/Foundry-Local/tree/main/sdk/python)
- **рдПрдХрддреНрд░реАрдХрд░рдг рдЙрджрд╛рд╣рд░рдгреЗ**: https://learn.microsoft.com/en-us/azure/ai-foundry/foundry-local/how-to/how-to-chat-application-with-open-web-ui

## рдкреБрдвреАрд▓ рдкрд╛рд╡рд▓реЗ
- рдХреНрд▓рд╛рдЙрдб-рд╣реЛрд╕реНрдЯреЗрдб рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрд╢рдирд╕рд╛рдареА Azure AI Agents рдПрдХреНрд╕рдкреНрд▓реЛрд░ рдХрд░рд╛
- рдПрдВрдЯрд░рдкреНрд░рд╛рдЗрдЭ рдХрдиреЗрдХреНрдЯрд░реНрд╕ рдЬреЛрдбрд╛ (Microsoft Graph, Search, рдбреЗрдЯрд╛рдмреЗрд╕)

---

